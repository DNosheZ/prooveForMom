const Registros5N=[
    {
        servicio:"MI",
        nombre:'Medicina interna',
        cantidad:0,
    },
    {
        servicio:"CG",
        nombre:"Cirugia general",
        cantidad:0,
    },
    {
        servicio:"OTP",
        nombre:"Ortopedia",
        cantidad:0,
    },
    {
        servicio:"URG",
        nombre:"Urologia",
        cantidad:0,
    },
    {
        servicio:"GNK",
        nombre:"Ginecologia",
        cantidad:0,
    },
    {
        servicio:"CXP",
        nombre:"CX Plastica",
        cantidad:0,
    },
    {
        servicio:"CXV",
        nombre:"CX Vascular",
        cantidad:0,
    },
    {
        servicio:"IFT",
        nombre:"Infectologia",
        cantidad:0,
    },
    {
        servicio:"NRG",
        nombre:"Neurocirugia",
        cantidad:0,
    },
    {
        servicio:"MXF",
        nombre:"Maxilofacial",
        cantidad:0,
    },
    {
        servicio:"CXT",
        nombre:"Cirugia de torax",
        cantidad:0,
    },
    {
        servicio:"OTR",
        nombre:"Otorrino",
        cantidad:0,
    },
    {
        servicio:"HMT",
        nombre:"Hematologia",
        cantidad:0,
    },
    {
        servicio:"PSQ",
        nombre:"Psiquiatria",
        cantidad:0,
    },
    {
        servicio:"CXH",
        nombre:"CX Hepatobiliar",
        cantidad:0,
    },
    {
        servicio:"DMT",
        nombre:"Dermatologia",
        cantidad:0,
    },
    {
        servicio:"HPL",
        nombre:"Hepatologia",
        cantidad:0,
    },
    {
        servicio:"NRL",
        nombre:"Neurologia",
        cantidad:0,
    },
    {
        servicio:"NFL",
        nombre:"Nefrologia",
        cantidad:0,
    },
    {
        servicio:"MEDD",
        nombre:"MED Dolor",
        cantidad:0,
    },
    {
        servicio:"ALL",
        nombre:"Alergologia",
        cantidad:0,
    },
    {
        servicio:"TXL",
        nombre:"Toxicologia",
        cantidad:0,
    },
    {
        servicio:"P900",
        nombre:"Programa 900",
        cantidad:0,
    },
];

const Registros6S=[
    {
        servicio:"MI",
        nombre:'Medicina interna',
        cantidad:0,
    },
    {
        servicio:"CG",
        nombre:"Cirugia general",
        cantidad:0,
    },
    {
        servicio:"OTP",
        nombre:"Ortopedia",
        cantidad:0,
    },
    {
        servicio:"URG",
        nombre:"Urologia",
        cantidad:0,
    },
    {
        servicio:"GNK",
        nombre:"Ginecologia",
        cantidad:0,
    },
    {
        servicio:"CXP",
        nombre:"CX Plastica",
        cantidad:0,
    },
    {
        servicio:"CXV",
        nombre:"CX Vascular",
        cantidad:0,
    },
    {
        servicio:"IFT",
        nombre:"Infectologia",
        cantidad:0,
    },
    {
        servicio:"NRG",
        nombre:"Neurocirugia",
        cantidad:0,
    },
    {
        servicio:"MXF",
        nombre:"Maxilofacial",
        cantidad:0,
    },
    {
        servicio:"CXT",
        nombre:"Cirugia de torax",
        cantidad:0,
    },
    {
        servicio:"OTR",
        nombre:"Otorrino",
        cantidad:0,
    },
    {
        servicio:"HMT",
        nombre:"Hematologia",
        cantidad:0,
    },
    {
        servicio:"PSQ",
        nombre:"Psiquiatria",
        cantidad:0,
    },
    {
        servicio:"CXH",
        nombre:"CX Hepatobiliar",
        cantidad:0,
    },
    {
        servicio:"DMT",
        nombre:"Dermatologia",
        cantidad:0,
    },
    {
        servicio:"HPL",
        nombre:"Hepatologia",
        cantidad:0,
    },
    {
        servicio:"NRL",
        nombre:"Neurologia",
        cantidad:0,
    },
    {
        servicio:"NFL",
        nombre:"Nefrologia",
        cantidad:0,
    },
    {
        servicio:"MEDD",
        nombre:"MED Dolor",
        cantidad:0,
    },
    {
        servicio:"ALL",
        nombre:"Alergologia",
        cantidad:0,
    },
    {
        servicio:"TXL",
        nombre:"Toxicologia",
        cantidad:0,
    },
    {
        servicio:"P900",
        nombre:"Programa 900",
        cantidad:0,
    },
];

const Registros7N=[
    {
        servicio:"MI",
        nombre:'Medicina interna',
        cantidad:0,
    },
    {
        servicio:"CG",
        nombre:"Cirugia general",
        cantidad:0,
    },
    {
        servicio:"OTP",
        nombre:"Ortopedia",
        cantidad:0,
    },
    {
        servicio:"URG",
        nombre:"Urologia",
        cantidad:0,
    },
    {
        servicio:"GNK",
        nombre:"Ginecologia",
        cantidad:0,
    },
    {
        servicio:"CXP",
        nombre:"CX Plastica",
        cantidad:0,
    },
    {
        servicio:"CXV",
        nombre:"CX Vascular",
        cantidad:0,
    },
    {
        servicio:"IFT",
        nombre:"Infectologia",
        cantidad:0,
    },
    {
        servicio:"NRG",
        nombre:"Neurocirugia",
        cantidad:0,
    },
    {
        servicio:"MXF",
        nombre:"Maxilofacial",
        cantidad:0,
    },
    {
        servicio:"CXT",
        nombre:"Cirugia de torax",
        cantidad:0,
    },
    {
        servicio:"OTR",
        nombre:"Otorrino",
        cantidad:0,
    },
    {
        servicio:"HMT",
        nombre:"Hematologia",
        cantidad:0,
    },
    {
        servicio:"PSQ",
        nombre:"Psiquiatria",
        cantidad:0,
    },
    {
        servicio:"CXH",
        nombre:"CX Hepatobiliar",
        cantidad:0,
    },
    {
        servicio:"DMT",
        nombre:"Dermatologia",
        cantidad:0,
    },
    {
        servicio:"HPL",
        nombre:"Hepatologia",
        cantidad:0,
    },
    {
        servicio:"NRL",
        nombre:"Neurologia",
        cantidad:0,
    },
    {
        servicio:"NFL",
        nombre:"Nefrologia",
        cantidad:0,
    },
    {
        servicio:"MEDD",
        nombre:"MED Dolor",
        cantidad:0,
    },
    {
        servicio:"ALL",
        nombre:"Alergologia",
        cantidad:0,
    },
    {
        servicio:"TXL",
        nombre:"Toxicologia",
        cantidad:0,
    },
    {
        servicio:"P900",
        nombre:"Programa 900",
        cantidad:0,
    },
];

function redirectTo(origen, fin) {
    let div1 = document.getElementById(origen);
    let div2 = document.getElementById(fin);

    div1.style.display = 'none';
    div2.style.display = 'block';
}

document.getElementById('selecService').addEventListener('submit', function(event) {
    event.preventDefault();

    var act = event.submitter.value;
    var bedsDiv = document.getElementById("beds");
    if (act === '5N') {
        redirectTo('selection-of-service', 'service-register');
        document.getElementById('registro-sala-i').textContent = '5N';
        
        bedsDiv.innerHTML = '';

        const form = document.createElement('form');
        form.id = 'registroForm';

        Registros5N.forEach((registro, index) => {
            const formGroup = document.createElement('div');
            formGroup.className = 'form-group';
    
            const label = document.createElement('label');
            label.htmlFor = `servicio-${index}`;
            label.textContent = registro.nombre;
    
            const input = document.createElement('input');
            input.type = 'number';
            input.id = `servicio-${index}`;
            input.name = registro.servicio;
            input.value = registro.cantidad;
            input.min = 0;
    
            formGroup.appendChild(label);
            formGroup.appendChild(input);
            form.appendChild(formGroup);
        });

        const submitButton = document.createElement('button');
        submitButton.type = 'submit';
        submitButton.className = 'submit-btn';
        submitButton.value='save-room';
        submitButton.textContent = 'Guardar sala';

        const submitCloseButton = document.createElement('button');
        submitCloseButton.type = 'submit';
        submitCloseButton.className = 'submit-btn';
        submitCloseButton.value='save-&-close-room';
        submitCloseButton.textContent = 'Guardar y cerrar sala';

        form.appendChild(submitButton);
        form.appendChild(submitCloseButton);
        bedsDiv.appendChild(form);

        form.addEventListener('submit', function(event) {
            event.preventDefault();
            var action = event.submitter.value;
        
            if (action === 'save-room') {
                Registros5N.forEach((registro, index) => {
                    const input = document.getElementById(`servicio-${index}`);
                    registro.cantidad = parseInt(input.value, 10);
                });
            } else if (action === 'save-&-close-room') {
                Registros5N.forEach((registro, index) => {
                    const input = document.getElementById(`servicio-${index}`);
                    registro.cantidad = parseInt(input.value, 10);
                });
                redirectTo('service-register','selection-of-service');
            }
            
            console.log(Registros5N);
            alert('Datos guardados exitosamente');
        });
        // Aquí puedes agregar campos específicos según el valor de action, si es necesario
    }else if(act === '7N'){
        redirectTo('selection-of-service', 'service-register');
        document.getElementById('registro-sala-i').textContent = '7N';
        
        bedsDiv.innerHTML = '';

        const form = document.createElement('form');
        form.id = 'registroForm';

        Registros7N.forEach((registro, index) => {
            const formGroup = document.createElement('div');
            formGroup.className = 'form-group';
    
            const label = document.createElement('label');
            label.htmlFor = `servicio-${index}`;
            label.textContent = registro.nombre;
    
            const input = document.createElement('input');
            input.type = 'number';
            input.id = `servicio-${index}`;
            input.name = registro.servicio;
            input.value = registro.cantidad;
            input.min = 0;
    
            formGroup.appendChild(label);
            formGroup.appendChild(input);
            form.appendChild(formGroup);
        });

        const submitButton = document.createElement('button');
        submitButton.type = 'submit';
        submitButton.className = 'submit-btn';
        submitButton.textContent = 'Guardar sala';

        const submitCloseButton = document.createElement('button');
        submitCloseButton.type = 'submit';
        submitCloseButton.className = 'submit-btn';
        submitCloseButton.value='save-&-close-room';
        submitCloseButton.textContent = 'Guardar y cerrar sala';

        form.appendChild(submitButton);
        form.appendChild(submitCloseButton);
        bedsDiv.appendChild(form);

        form.addEventListener('submit', function(event) {
            event.preventDefault();
            var action = event.submitter.value;
        
            if (action === 'save-room') {
                Registros7N.forEach((registro, index) => {
                    const input = document.getElementById(`servicio-${index}`);
                    registro.cantidad = parseInt(input.value, 10);
                });
            } else if (action === 'save-&-close-room') {
                Registros7N.forEach((registro, index) => {
                    const input = document.getElementById(`servicio-${index}`);
                    registro.cantidad = parseInt(input.value, 10);
                });
                redirectTo('service-register','selection-of-service');
            }
            
            console.log(Registros7N);
            alert('Datos guardados exitosamente');
        });
        
    }else if(act === '6S'){
        redirectTo('selection-of-service', 'service-register');
        document.getElementById('registro-sala-i').textContent = '6S';
        
        bedsDiv.innerHTML = '';

        const form = document.createElement('form');
        form.id = 'registroForm';

        Registros6S.forEach((registro, index) => {
            const formGroup = document.createElement('div');
            formGroup.className = 'form-group';
    
            const label = document.createElement('label');
            label.htmlFor = `servicio-${index}`;
            label.textContent = registro.nombre;
    
            const input = document.createElement('input');
            input.type = 'number';
            input.id = `servicio-${index}`;
            input.name = registro.servicio;
            input.value = registro.cantidad;
            input.min = 0;
    
            formGroup.appendChild(label);
            formGroup.appendChild(input);
            form.appendChild(formGroup);
        });

        const submitButton = document.createElement('button');
        submitButton.type = 'submit';
        submitButton.className = 'submit-btn';
        submitButton.textContent = 'Guardar sala';

        const submitCloseButton = document.createElement('button');
        submitCloseButton.type = 'submit';
        submitCloseButton.className = 'submit-btn';
        submitCloseButton.value='save-&-close-room';
        submitCloseButton.textContent = 'Guardar y cerrar sala';

        form.appendChild(submitButton);
        form.appendChild(submitCloseButton);
        bedsDiv.appendChild(form);

        form.addEventListener('submit', function(event) {
            event.preventDefault();
            var action = event.submitter.value;
        
            if (action === 'save-room') {
                Registros6S.forEach((registro, index) => {
                    const input = document.getElementById(`servicio-${index}`);
                    registro.cantidad = parseInt(input.value, 10);
                });
            } else if (action === 'save-&-close-room') {
                Registros6S.forEach((registro, index) => {
                    const input = document.getElementById(`servicio-${index}`);
                    registro.cantidad = parseInt(input.value, 10);
                });
                redirectTo('service-register','selection-of-service');
            }
            
            console.log(Registros6S);
            alert('Datos guardados exitosamente');
       });
        // Aquí puedes agregar campos específicos según el valor de action, si es necesario
    }
});

document.getElementById('backForm').addEventListener('submit', function(event) {
    event.preventDefault();
    //revisar si un JSON a cambiado
    const now = new Date();

    const day = String(now.getDate()).padStart(2, '0');
    const month = String(now.getMonth() + 1).padStart(2, '0'); // Los meses empiezan en 0
    const year = now.getFullYear();

    const formattedDateTime = `${day}/${month}/${year}`;
    localStorage.setItem(formattedDateTime+"-registro5N",JSON.stringify(Registros5N));
    localStorage.setItem(formattedDateTime+"-registro7N",JSON.stringify(Registros7N));
    localStorage.setItem(formattedDateTime+"-registro6S",JSON.stringify(Registros6S));
    Registros7N.forEach((registro) => {
        registro.cantidad = 0;
    });
    Registros7N.forEach((registro) => {
        registro.cantidad = 0;
    });
    Registros6S.forEach((registro) => {
        registro.cantidad = 0;
    });
    if(localStorage.length!==0){
        window.location.href = 'menu.html';
    }
});